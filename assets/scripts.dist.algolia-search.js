(()=>{var e={879:(e,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t="2.15.0";function extractAdditionalParams(e){return e.reduce((function(e,r){var t=e.events;e=e.additionalParams;return"index"in r?{additionalParams:e,events:t.concat([r])}:{events:t,additionalParams:r}}),{events:[],additionalParams:void 0})}var LocalStorage=function(){},a=(LocalStorage.get=function(e){if(!(e=localStorage.getItem(e)))return null;try{return JSON.parse(e)}catch(e){return null}},LocalStorage.set=function(e,r){try{localStorage.setItem(e,JSON.stringify(r))}catch(r){console.error("Unable to set "+e+" in localStorage, storage may be full.")}},LocalStorage.remove=function(e){localStorage.removeItem(e)},LocalStorage.THRESHOLD=.9,"AlgoliaObjectQueryCache"),n=5e3,s=1e3;function getCache(){var e;return null!=(e=LocalStorage.get(a))?e:{}}function setCache(e){LocalStorage.set(a,function limited(e){return Object.keys(e).length>n?function purgeOldest(e){return e=Object.entries(e).sort((function(e,r){return e=e[1][1],r[1][1]-e})),e.slice(0,e.length-s-1).reduce((function(e,r){var t=r[0];r=r[1];return Object.assign(Object.assign({},e),((e={})[t]=r,e))}),{})}(e):e}(e))}function makeKey(e,r){return e+"_"+r}function storeQueryForObject(e,r,t){var a=getCache();a[makeKey(e,r)]=[t,Date.now()],setCache(a)}var isUndefined=function(e){return void 0===e},isFunction=function(e){return"function"==typeof e};function getFunctionalInterface(e){return function(r){for(var t=[],a=arguments.length-1;0<a--;)t[a]=arguments[a+1];r&&isFunction(e[r])?e[r].apply(e,t):console.warn("The method `"+r+"` doesn't exist.")}}var i=["insights-js ("+t+")","insights-js-browser-cjs ("+t+")"];function addAlgoliaAgent(e){-1===this._ua.indexOf(e)&&this._ua.push(e)}function getVersion(e){isFunction(e)&&e(this.version)}function __rest(e,r){var t={};for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t}function addQueryId(e){return e.map((function(e){var r,t;return function isValidEventForQueryIdLookup(e){return!e.queryID&&"conversion"===e.eventType}(e)&&(r=[],t=null==(t=e.objectIDs)?void 0:t.map((function(t,a){var n=null==(n=e.objectData)?void 0:n[a];return null!=n&&n.queryID?n:((a=(null!=(a=function getQueryForObject(e,r){return getCache()[makeKey(e,r)]}(e.index,t))?a:[])[0])&&r.push(t),Object.assign(Object.assign({},n),{queryID:a}))})),0!==r.length)?Object.assign(Object.assign({},e),{objectData:t,objectIDsWithInferredQueryID:r}):e}))}function makeSendEvents(e){return function(r,t){var a=this;if(!this._userHasOptedOut){if(!(!isUndefined(this._apiKey)&&!isUndefined(this._appId)||(null==(n=null==t?void 0:t.headers)?void 0:n["X-Algolia-Application-Id"])&&(null==(n=null==t?void 0:t.headers)?void 0:n["X-Algolia-API-Key"])))throw new Error("Before calling any methods on the analytics, you first need to call the 'init' function with appId and apiKey parameters or provide custom credentials in additional parameters.");!this._userToken&&this._anonymousUserToken&&this.setAnonymousUserToken(!0);var n=(null!=t&&t.inferQueryID?addQueryId(r):r).map((function(e){var r=e.filters,t=__rest(e,["filters"]);e=Object.assign(Object.assign({},t),{userToken:null!=(t=null==e?void 0:e.userToken)?t:a._userToken,authenticatedUserToken:null!=(t=null==e?void 0:e.authenticatedUserToken)?t:a._authenticatedUserToken});return isUndefined(r)||(e.filters=r.map(encodeURIComponent)),e}));return 0===n.length?Promise.resolve(!1):(r=function sendRequest(e,r,t,a,n,s,i){var o=(i=void 0===i?{}:i)["X-Algolia-Application-Id"],c=i["X-Algolia-API-Key"],d=(i=__rest(i,["X-Algolia-Application-Id","X-Algolia-API-Key"]),Object.assign({"X-Algolia-Application-Id":null!=o?o:n,"X-Algolia-API-Key":null!=c?c:s,"X-Algolia-Agent":encodeURIComponent(r.join("; "))},i));return e(t+"/1/events?"+Object.keys(d).map((function(e){return e+"="+d[e]})).join("&"),{events:a})}(e,this._ua,this._endpointOrigin,n,this._appId,this._apiKey,null==t?void 0:t.headers),function(e){return"function"==typeof(null==e?void 0:e.then)}(r)?r.then(function purgePurchased(e){return function(r){return r&&e.filter((function(e){var r=e.eventType,t=e.eventSubtype;e=e.objectIDs;return"conversion"===r&&"purchase"===t&&(null==e?void 0:e.length)})).forEach((function(e){return function removeQueryForObjects(e,r){var t=getCache();r.forEach((function(r){delete t[makeKey(e,r)]})),setCache(t)}(e.index,e.objectIDs)})),r}}(n)):r)}}}function createUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var r=16*Math.random()|0;return("x"===e?r:3&r|8).toString(16)}))}var o="_ALGOLIA",c=2592e6;function setAnonymousUserToken(e){(e=void 0!==e&&e)?this.setUserToken("anonymous-"+createUUID()):function(){try{return Boolean(navigator.cookieEnabled)}catch(e){return!1}}()&&((e=function(e){for(var r=e+"=",t=document.cookie.split(";"),a=0;a<t.length;a++){for(var n=t[a];" "===n.charAt(0);)n=n.substring(1);if(0===n.indexOf(r))return n.substring(r.length,n.length)}return""}(o))&&""!==e&&0===e.indexOf("anonymous-")?this.setUserToken(e):(e=this.setUserToken("anonymous-"+createUUID()),function(e,r,t){var a=new Date;a.setTime(a.getTime()+t),t="expires="+a.toUTCString(),document.cookie=e+"="+r+";"+t+";path=/"}(o,e,this._cookieDuration)))}function setUserToken(e){return this._userToken=e,isFunction(this._onUserTokenChangeCallback)&&this._onUserTokenChangeCallback(this._userToken),this._userToken}function getUserToken(e,r){return isFunction(r)&&r(null,this._userToken),this._userToken}function onUserTokenChange(e,r){this._onUserTokenChangeCallback=e,r&&r.immediate&&isFunction(this._onUserTokenChangeCallback)&&this._onUserTokenChangeCallback(this._userToken)}function setAuthenticatedUserToken(e){return this._authenticatedUserToken=e,isFunction(this._onAuthenticatedUserTokenChangeCallback)&&this._onAuthenticatedUserTokenChangeCallback(this._authenticatedUserToken),this._authenticatedUserToken}function getAuthenticatedUserToken(e,r){return isFunction(r)&&r(null,this._authenticatedUserToken),this._authenticatedUserToken}function onAuthenticatedUserTokenChange(e,r){this._onAuthenticatedUserTokenChangeCallback=e,r&&r.immediate&&isFunction(this._onAuthenticatedUserTokenChangeCallback)&&this._onAuthenticatedUserTokenChangeCallback(this._authenticatedUserToken)}function addEventType(e,r){return r.map((function(r){return Object.assign({eventType:e},r)}))}function addEventTypeAndSubtype(e,r,t){return t.map((function(t){return Object.assign({eventType:e,eventSubtype:r},t)}))}function clickedObjectIDsAfterSearch(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var t=(a=extractAdditionalParams(e)).events,a=a.additionalParams;return t.forEach((function(e){var r=e.index,t=e.queryID;return e.objectIDs.forEach((function(e){return storeQueryForObject(r,e,t)}))})),this.sendEvents(addEventType("click",t),a)}function clickedObjectIDs(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var t=(a=extractAdditionalParams(e)).events,a=a.additionalParams;return this.sendEvents(addEventType("click",t),a)}function clickedFilters(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var t=(a=extractAdditionalParams(e)).events,a=a.additionalParams;return this.sendEvents(addEventType("click",t),a)}function convertedObjectIDsAfterSearch(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var t=(a=extractAdditionalParams(e)).events,a=a.additionalParams;return this.sendEvents(addEventType("conversion",t),a)}function addedToCartObjectIDsAfterSearch(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var t=(a=extractAdditionalParams(e)).events,a=a.additionalParams;return t.forEach((function(e){var r=e.index,t=e.queryID,a=e.objectIDs,n=e.objectData;return a.forEach((function(e,a){(a=null!=(a=null==(a=null==n?void 0:n[a])?void 0:a.queryID)?a:t)&&storeQueryForObject(r,e,a)}))})),this.sendEvents(addEventTypeAndSubtype("conversion","addToCart",t),a)}function purchasedObjectIDsAfterSearch(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var t=(a=extractAdditionalParams(e)).events,a=a.additionalParams;return this.sendEvents(addEventTypeAndSubtype("conversion","purchase",t),a)}function convertedObjectIDs(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var t=(a=extractAdditionalParams(e)).events,a=a.additionalParams;return this.sendEvents(addEventType("conversion",t),a)}function addedToCartObjectIDs(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var t=(a=extractAdditionalParams(e)).events,a=a.additionalParams;return t.forEach((function(e){var r=e.index,t=e.objectIDs,a=e.objectData;return t.forEach((function(e,t){(t=null==(t=null==a?void 0:a[t])?void 0:t.queryID)&&storeQueryForObject(r,e,t)}))})),this.sendEvents(addEventTypeAndSubtype("conversion","addToCart",t),a)}function purchasedObjectIDs(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var t=(a=extractAdditionalParams(e)).events,a=a.additionalParams;return this.sendEvents(addEventTypeAndSubtype("conversion","purchase",t),a)}function convertedFilters(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var t=(a=extractAdditionalParams(e)).events,a=a.additionalParams;return this.sendEvents(addEventType("conversion",t),a)}var d=["de","us"];function init(e){var r;if(!isUndefined((e=void 0===e?{}:e).region)&&-1===d.indexOf(e.region))throw new Error("optional region is incorrect, please provide either one of: "+d.join(", ")+".");if(!(isUndefined(e.cookieDuration)||function(e){return"number"==typeof e}(e.cookieDuration)&&isFinite(e.cookieDuration)&&Math.floor(e.cookieDuration)===e.cookieDuration))throw new Error("optional cookieDuration is incorrect, expected an integer.");(function setOptions(e,r,t){var a=r.partial,n=__rest(r,["partial"]);a||Object.assign(e,t),Object.assign(e,Object.keys(n).reduce((function(e,r){return Object.assign(Object.assign({},e),((e={})["_"+r]=n[r],e))}),{}))})(this,e,{_userHasOptedOut:Boolean(e.userHasOptedOut),_region:e.region,_host:e.host,_anonymousUserToken:null==(r=e.anonymousUserToken)||r,_useCookie:null!=(r=e.useCookie)&&r,_cookieDuration:e.cookieDuration||6*c}),this._endpointOrigin=this._host||(this._region?"https://insights."+this._region+".algolia.io":"https://insights.algolia.io"),this._ua=[].concat(i),e.authenticatedUserToken&&this.setAuthenticatedUserToken(e.authenticatedUserToken),e.userToken?this.setUserToken(e.userToken):this._userToken||this._userHasOptedOut||!this._useCookie||this.setAnonymousUserToken()}function viewedObjectIDs(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var t=(a=extractAdditionalParams(e)).events,a=a.additionalParams;return this.sendEvents(addEventType("view",t),a)}function viewedFilters(){for(var e=[],r=arguments.length;r--;)e[r]=arguments[r];var t=(a=extractAdditionalParams(e)).events,a=a.additionalParams;return this.sendEvents(addEventType("view",t),a)}var AlgoliaAnalytics=function(e){e=e.requestFn,this._endpointOrigin="https://insights.algolia.io",this._anonymousUserToken=!0,this._userHasOptedOut=!1,this._useCookie=!1,this._cookieDuration=6*c,this._ua=[],this.version=t,this.sendEvents=makeSendEvents(e).bind(this),this.init=init.bind(this),this.addAlgoliaAgent=addAlgoliaAgent.bind(this),this.setUserToken=setUserToken.bind(this),this.setAnonymousUserToken=setAnonymousUserToken.bind(this),this.getUserToken=getUserToken.bind(this),this.onUserTokenChange=onUserTokenChange.bind(this),this.setAuthenticatedUserToken=setAuthenticatedUserToken.bind(this),this.getAuthenticatedUserToken=getAuthenticatedUserToken.bind(this),this.onAuthenticatedUserTokenChange=onAuthenticatedUserTokenChange.bind(this),this.clickedObjectIDsAfterSearch=clickedObjectIDsAfterSearch.bind(this),this.clickedObjectIDs=clickedObjectIDs.bind(this),this.clickedFilters=clickedFilters.bind(this),this.convertedObjectIDsAfterSearch=convertedObjectIDsAfterSearch.bind(this),this.purchasedObjectIDsAfterSearch=purchasedObjectIDsAfterSearch.bind(this),this.addedToCartObjectIDsAfterSearch=addedToCartObjectIDsAfterSearch.bind(this),this.convertedObjectIDs=convertedObjectIDs.bind(this),this.addedToCartObjectIDs=addedToCartObjectIDs.bind(this),this.purchasedObjectIDs=purchasedObjectIDs.bind(this),this.convertedFilters=convertedFilters.bind(this),this.viewedObjectIDs=viewedObjectIDs.bind(this),this.viewedFilters=viewedFilters.bind(this),this.getVersion=getVersion.bind(this)};var requestWithXMLHttpRequest=function(e,r){return new Promise((function(t,a){var n=JSON.stringify(r),s=new XMLHttpRequest;s.addEventListener("readystatechange",(function(){4===s.readyState&&200===s.status?t(!0):4===s.readyState&&t(!1)})),s.addEventListener("error",(function(){return a()})),s.addEventListener("timeout",(function(){return t(!1)})),s.open("POST",e),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("Content-Length",""+n.length),s.send(n)}))},requestWithSendBeacon=function(e,r){var t=JSON.stringify(r);t=navigator.sendBeacon(e,t);return Promise.resolve(!!t||requestWithXMLHttpRequest(e,r))},requestWithNativeFetch=function(e,r){return new Promise((function(t,a){fetch(e,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}}).then((function(e){t(200===e.status)})).catch((function(e){a(e)}))}))};function getRequesterForBrowser(){if(function(){try{return Boolean(navigator.sendBeacon)}catch(e){return!1}}())return requestWithSendBeacon;if(function(){try{return Boolean(XMLHttpRequest)}catch(e){return!1}}())return requestWithXMLHttpRequest;if(function(){try{return void 0!==fetch}catch(e){return!1}}())return requestWithNativeFetch;throw new Error("Could not find a supported HTTP request client in this environment.")}var u=function createInsightsClient(e){var r;if(e=getFunctionalInterface(new AlgoliaAnalytics({requestFn:e})),"object"==typeof window&&!window.AlgoliaAnalyticsObject){for(;r=createUUID(),void 0!==window[r];);window.AlgoliaAnalyticsObject=r,window[window.AlgoliaAnalyticsObject]=e}return e.version=t,e}(getRequesterForBrowser());r.AlgoliaAnalytics=AlgoliaAnalytics,r.default=u,r.getFunctionalInterface=getFunctionalInterface,r.getRequesterForBrowser=getRequesterForBrowser,r.processQueue=function processQueue(e){var r,t=e.AlgoliaAnalyticsObject;t&&(r=getFunctionalInterface(this),(e=e[t]).queue=e.queue||[],(t=e.queue).forEach((function(e){var t=(e=[].slice.call(e))[0];e=e.slice(1);r.apply(void 0,[t].concat(e))})),t.push=function(e){var t=(e=[].slice.call(e))[0];e=e.slice(1);r.apply(void 0,[t].concat(e))})}},424:(e,r,t)=>{const a=t(879);e.exports=a.default,Object.keys(a).forEach((r=>{"default"!==r&&(e.exports[r]=a[r])}))}},r={};function __webpack_require__(t){var a=r[t];if(void 0!==a)return a.exports;var n=r[t]={exports:{}};return e[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=(e,r)=>{for(var t in r)__webpack_require__.o(r,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},__webpack_require__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};(()=>{"use strict";function createIterablePromise({func:e,validate:r,aggregator:t,error:a,timeout:n=(()=>0)}){const retry=s=>new Promise(((i,o)=>{e(s).then((e=>(t&&t(e),r(e)?i(e):a&&a.validate(e)?o(new Error(a.message(e))):setTimeout((()=>{retry(e).then(i).catch(o)}),n())))).catch((e=>{o(e)}))}));return retry()}function createBrowserLocalStorageCache(e){let r;const t=`algolia-client-js-${e.key}`;function getStorage(){return void 0===r&&(r=e.localStorage||window.localStorage),r}function getNamespace(){return JSON.parse(getStorage().getItem(t)||"{}")}function setNamespace(e){getStorage().setItem(t,JSON.stringify(e))}return{get:(r,t,a={miss:()=>Promise.resolve()})=>Promise.resolve().then((()=>(function removeOutdatedCacheItems(){const r=e.timeToLive?1e3*e.timeToLive:null,t=getNamespace(),a=Object.fromEntries(Object.entries(t).filter((([,e])=>void 0!==e.timestamp)));if(setNamespace(a),!r)return;setNamespace(Object.fromEntries(Object.entries(a).filter((([,e])=>{const t=(new Date).getTime();return!(e.timestamp+r<t)}))))}(),getNamespace()[JSON.stringify(r)]))).then((e=>Promise.all([e?e.value:t(),void 0!==e]))).then((([e,r])=>Promise.all([e,r||a.miss(e)]))).then((([e])=>e)),set:(e,r)=>Promise.resolve().then((()=>{const a=getNamespace();return a[JSON.stringify(e)]={timestamp:(new Date).getTime(),value:r},getStorage().setItem(t,JSON.stringify(a)),r})),delete:e=>Promise.resolve().then((()=>{const r=getNamespace();delete r[JSON.stringify(e)],getStorage().setItem(t,JSON.stringify(r))})),clear:()=>Promise.resolve().then((()=>{getStorage().removeItem(t)}))}}function createFallbackableCache(e){const r=[...e.caches],t=r.shift();return void 0===t?function createNullCache(){return{get:(e,r,t={miss:()=>Promise.resolve()})=>r().then((e=>Promise.all([e,t.miss(e)]))).then((([e])=>e)),set:(e,r)=>Promise.resolve(r),delete:e=>Promise.resolve(),clear:()=>Promise.resolve()}}():{get:(e,a,n={miss:()=>Promise.resolve()})=>t.get(e,a,n).catch((()=>createFallbackableCache({caches:r}).get(e,a,n))),set:(e,a)=>t.set(e,a).catch((()=>createFallbackableCache({caches:r}).set(e,a))),delete:e=>t.delete(e).catch((()=>createFallbackableCache({caches:r}).delete(e))),clear:()=>t.clear().catch((()=>createFallbackableCache({caches:r}).clear()))}}function createMemoryCache(e={serializable:!0}){let r={};return{get(t,a,n={miss:()=>Promise.resolve()}){const s=JSON.stringify(t);if(s in r)return Promise.resolve(e.serializable?JSON.parse(r[s]):r[s]);const i=a();return i.then((e=>n.miss(e))).then((()=>i))},set:(t,a)=>(r[JSON.stringify(t)]=e.serializable?JSON.stringify(a):a,Promise.resolve(a)),delete:e=>(delete r[JSON.stringify(e)],Promise.resolve()),clear:()=>(r={},Promise.resolve())}}__webpack_require__.r(t),__webpack_require__.d(t,{AgSearchInsightsUtil:()=>AgSearchInsightsUtil,AgSearchUtil:()=>AgSearchUtil});const e=12e4;function createStatefulHost(r,t="up"){const a=Date.now();return{...r,status:t,lastUpdate:a,isUp:function isUp(){return"up"===t||Date.now()-a>e},isTimedOut:function isTimedOut(){return"timed out"===t&&Date.now()-a<=e}}}function _toPropertyKey(e){var r=function _toPrimitive(e,r){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,r||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:r+""}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}class AlgoliaError extends Error{constructor(e,r){super(e),_defineProperty(this,"name","AlgoliaError"),r&&(this.name=r)}}class ErrorWithStackTrace extends AlgoliaError{constructor(e,r,t){super(e,t),_defineProperty(this,"stackTrace",void 0),this.stackTrace=r}}class RetryError extends ErrorWithStackTrace{constructor(e){super("Unreachable hosts - your application id may be incorrect. If the error persists, please create a ticket at https://support.algolia.com/ sharing steps we can use to reproduce the issue.",e,"RetryError")}}class ApiError extends ErrorWithStackTrace{constructor(e,r,t,a="ApiError"){super(e,t,a),_defineProperty(this,"status",void 0),this.status=r}}class DeserializationError extends AlgoliaError{constructor(e,r){super(e,"DeserializationError"),_defineProperty(this,"response",void 0),this.response=r}}class DetailedApiError extends ApiError{constructor(e,r,t,a){super(e,r,a,"DetailedApiError"),_defineProperty(this,"error",void 0),this.error=t}}function serializeUrl(e,r,t){const a=function serializeQueryParameters(e){const isObjectOrArray=e=>"[object Object]"===Object.prototype.toString.call(e)||"[object Array]"===Object.prototype.toString.call(e);return Object.keys(e).map((r=>`${r}=${encodeURIComponent(isObjectOrArray(e[r])?JSON.stringify(e[r]):e[r]).replaceAll("+","%20")}`)).join("&")}(t);let n=`${e.protocol}://${e.url}${e.port?`:${e.port}`:""}/${"/"===r.charAt(0)?r.substring(1):r}`;return a.length&&(n+=`?${a}`),n}function stackFrameWithoutCredentials(e){const r=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return{...e,request:{...e.request,headers:{...e.request.headers,...r}}}}function createTransporter({hosts:e,hostsCache:r,baseHeaders:t,baseQueryParameters:a,algoliaAgent:n,timeouts:s,requester:i,requestsCache:o,responsesCache:c}){async function retryableRequest(o,c,d=!0){const u=[],l=function serializeData(e,r){if("GET"===e.method||void 0===e.data&&void 0===r.data)return;const t=Array.isArray(e.data)?e.data:{...e.data,...r.data};return JSON.stringify(t)}(o,c),h=function serializeHeaders(e,r,t){const a={Accept:"application/json",...e,...r,...t},n={};return Object.keys(a).forEach((e=>{const r=a[e];n[e.toLowerCase()]=r})),n}(t,o.headers,c.headers),m="GET"===o.method?{...o.data,...c.data}:{},p={...a,...o.queryParameters,...m};if(n.value&&(p["x-algolia-agent"]=n.value),c&&c.queryParameters)for(const e of Object.keys(c.queryParameters))c.queryParameters[e]&&"[object Object]"!==Object.prototype.toString.call(c.queryParameters[e])?p[e]=c.queryParameters[e].toString():p[e]=c.queryParameters[e];let g=0;const retry=async(e,t)=>{const a=e.pop();if(void 0===a)throw new RetryError(function stackTraceWithoutCredentials(e){return e.map((e=>stackFrameWithoutCredentials(e)))}(u));let n=d?c.timeouts?.read||s.read:c.timeouts?.write||s.write;const m={data:l,headers:h,method:o.method,url:serializeUrl(a,o.path,p),connectTimeout:t(g,c.timeouts?.connect||s.connect),responseTimeout:t(g,n)},pushToStackTrace=r=>{const t={request:m,response:r,host:a,triesLeft:e.length};return u.push(t),t},y=await i.send(m);if(function isRetryable({isTimedOut:e,status:r}){return e||function isNetworkError({isTimedOut:e,status:r}){return!e&&!~~r}({isTimedOut:e,status:r})||2!=~~(r/100)&&4!=~~(r/100)}(y)){const n=pushToStackTrace(y);return y.isTimedOut&&g++,console.log("Retryable failure",stackFrameWithoutCredentials(n)),await r.set(a,createStatefulHost(a,y.isTimedOut?"timed out":"down")),retry(e,t)}if(function isSuccess({status:e}){return 2==~~(e/100)}(y))return function deserializeSuccess(e){try{return JSON.parse(e.content)}catch(r){throw new DeserializationError(r.message,e)}}(y);throw pushToStackTrace(y),function deserializeFailure({content:e,status:r},t){try{const a=JSON.parse(e);return"error"in a?new DetailedApiError(a.message,r,a.error,t):new ApiError(a.message,r,t)}catch(e){}return new ApiError(e,r,t)}(y,u)},y=e.filter((e=>"readWrite"===e.accept||(d?"read"===e.accept:"write"===e.accept))),f=await async function createRetryableOptions(e){const t=await Promise.all(e.map((e=>r.get(e,(()=>Promise.resolve(createStatefulHost(e))))))),a=t.filter((e=>e.isUp())),n=t.filter((e=>e.isTimedOut())),s=[...a,...n];return{hosts:s.length>0?s:e,getTimeout:(e,r)=>(0===n.length&&0===e?1:n.length+3+e)*r}}(y);return retry([...f.hosts].reverse(),f.getTimeout)}return{hostsCache:r,requester:i,timeouts:s,algoliaAgent:n,baseHeaders:t,baseQueryParameters:a,hosts:e,request:function createRequest(e,r={}){const n=e.useReadTransporter||"GET"===e.method;if(!n)return retryableRequest(e,r,n);const createRetryableRequest=()=>retryableRequest(e,r);if(!0!==(r.cacheable||e.cacheable))return createRetryableRequest();const s={request:e,requestOptions:r,transporter:{queryParameters:a,headers:t}};return c.get(s,(()=>o.get(s,(()=>o.set(s,createRetryableRequest()).then((e=>Promise.all([o.delete(s),e])),(e=>Promise.all([o.delete(s),Promise.reject(e)]))).then((([e,r])=>r))))),{miss:e=>c.set(s,e)})},requestsCache:o,responsesCache:c}}function getAlgoliaAgent({algoliaAgents:e,client:r,version:t}){const a=function createAlgoliaAgent(e){const r={value:`Algolia for JavaScript (${e})`,add(e){const t=`; ${e.segment}${void 0!==e.version?` (${e.version})`:""}`;return-1===r.value.indexOf(t)&&(r.value=`${r.value}${t}`),r}};return r}(t).add({segment:r,version:t});return e.forEach((e=>a.add(e))),a}const r="5.0.0-beta.2";function getDefaultHosts(e){return[{url:`${e}-dsn.algolia.net`,accept:"read",protocol:"https"},{url:`${e}.algolia.net`,accept:"write",protocol:"https"}].concat(function shuffle(e){const r=e;for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1)),n=e[t];r[t]=e[a],r[a]=n}return r}([{url:`${e}-1.algolianet.com`,accept:"readWrite",protocol:"https"},{url:`${e}-2.algolianet.com`,accept:"readWrite",protocol:"https"},{url:`${e}-3.algolianet.com`,accept:"readWrite",protocol:"https"}]))}function searchClient(e,t,a){if(!e||"string"!=typeof e)throw new Error("`appId` is missing.");if(!t||"string"!=typeof t)throw new Error("`apiKey` is missing.");return function createSearchClient({appId:e,apiKey:t,authMode:a,algoliaAgents:n,...s}){const i=function createAuth(e,r,t="WithinHeaders"){const a={"x-algolia-api-key":r,"x-algolia-application-id":e};return{headers:()=>"WithinHeaders"===t?a:{},queryParameters:()=>"WithinQueryParameters"===t?a:{}}}(e,t,a),o=createTransporter({hosts:getDefaultHosts(e),...s,algoliaAgent:getAlgoliaAgent({algoliaAgents:n,client:"Search",version:r}),baseHeaders:{"content-type":"text/plain",...i.headers(),...s.baseHeaders},baseQueryParameters:{...i.queryParameters(),...s.baseQueryParameters}});return{transporter:o,appId:e,clearCache:()=>Promise.all([o.requestsCache.clear(),o.responsesCache.clear()]).then((()=>{})),get _ua(){return o.algoliaAgent.value},addAlgoliaAgent(e,r){o.algoliaAgent.add({segment:e,version:r})},waitForTask({indexName:e,taskID:r,maxRetries:t=50,timeout:a=(e=>Math.min(200*e,5e3))},n){let s=0;return createIterablePromise({func:()=>this.getTask({indexName:e,taskID:r},n),validate:e=>"published"===e.status,aggregator:()=>s+=1,error:{validate:()=>s>=t,message:()=>`The maximum number of retries exceeded. (${s}/${t})`},timeout:()=>a(s)})},waitForApiKey({operation:e,key:r,apiKey:t,maxRetries:a=50,timeout:n=(e=>Math.min(200*e,5e3))},s){let i=0;const o={aggregator:()=>i+=1,error:{validate:()=>i>=a,message:()=>`The maximum number of retries exceeded. (${i}/${a})`},timeout:()=>n(i)};if("update"===e){if(!t)throw new Error("`apiKey` is required when waiting for an `update` operation.");return createIterablePromise({...o,func:()=>this.getApiKey({key:r},s),validate:e=>{for(const r of Object.keys(t)){const a=t[r],n=e[r];if(Array.isArray(a)&&Array.isArray(n)){if(a.length!==n.length||a.some(((e,r)=>e!==n[r])))return!1}else if(a!==n)return!1}return!0}})}return createIterablePromise({...o,func:()=>this.getApiKey({key:r},s).catch((e=>e)),validate:r=>"add"===e?404!==r.status:404===r.status})},browseObjects({indexName:e,browseParams:r,...t},a){return createIterablePromise({func:t=>this.browse({indexName:e,browseParams:{cursor:t?t.cursor:void 0,...r}},a),validate:e=>void 0===e.cursor,...t})},browseRules({indexName:e,searchRulesParams:r,...t},a){const n={hitsPerPage:1e3,...r};return createIterablePromise({func:r=>this.searchRules({indexName:e,searchRulesParams:{...n,page:r?r.page+1:n.page||0}},a),validate:e=>e.nbHits<n.hitsPerPage,...t})},browseSynonyms({indexName:e,searchSynonymsParams:r,...t},a){const n={page:0,...r,hitsPerPage:1e3};return createIterablePromise({func:r=>{const t=this.searchSynonyms({indexName:e,searchSynonymsParams:{...n,page:n.page}},a);return n.page+=1,t},validate:e=>e.nbHits<n.hitsPerPage,...t})},searchForHits(e,r){return this.search(e,r)},searchForFacets(e,r){return this.search(e,r)},async chunkedBatch({indexName:e,objects:r,action:t="addObject",waitForTasks:a,batchSize:n=1e3},s){let i=[];const o=[];for(const[a,c]of r.entries())i.push({action:t,body:c}),a%n==0&&(o.push(await this.batch({indexName:e,batchWriteParams:{requests:i}},s)),i=[]);if(a)for(const r of o)await this.waitForTask({indexName:e,taskID:r.taskID});return o},async replaceAllObjects({indexName:e,objects:r,batchSize:t},a){const n=`${e}_tmp_${Math.random().toString(36).substring(7)}`,s=await this.operationIndex({indexName:e,operationIndexParams:{operation:"copy",destination:n,scope:["settings","rules","synonyms"]}},a);await this.waitForTask({indexName:e,taskID:s.taskID});const i=await this.chunkedBatch({indexName:n,objects:r,waitForTasks:!0,batchSize:t},a),o=await this.operationIndex({indexName:n,operationIndexParams:{operation:"move",destination:e}},a);return await this.waitForTask({indexName:e,taskID:o.taskID}),{copyOperationResponse:s,batchResponses:i,moveOperationResponse:o}},addApiKey(e,r){if(!e)throw new Error("Parameter `apiKey` is required when calling `addApiKey`.");if(!e.acl)throw new Error("Parameter `apiKey.acl` is required when calling `addApiKey`.");const t={method:"POST",path:"/1/keys",queryParameters:{},headers:{},data:e};return o.request(t,r)},addOrUpdateObject({indexName:e,objectID:r,body:t},a){if(!e)throw new Error("Parameter `indexName` is required when calling `addOrUpdateObject`.");if(!r)throw new Error("Parameter `objectID` is required when calling `addOrUpdateObject`.");if(!t)throw new Error("Parameter `body` is required when calling `addOrUpdateObject`.");const n={method:"PUT",path:"/1/indexes/{indexName}/{objectID}".replace("{indexName}",encodeURIComponent(e)).replace("{objectID}",encodeURIComponent(r)),queryParameters:{},headers:{},data:t};return o.request(n,a)},appendSource(e,r){if(!e)throw new Error("Parameter `source` is required when calling `appendSource`.");if(!e.source)throw new Error("Parameter `source.source` is required when calling `appendSource`.");const t={method:"POST",path:"/1/security/sources/append",queryParameters:{},headers:{},data:e};return o.request(t,r)},assignUserId({xAlgoliaUserID:e,assignUserIdParams:r},t){if(!e)throw new Error("Parameter `xAlgoliaUserID` is required when calling `assignUserId`.");if(!r)throw new Error("Parameter `assignUserIdParams` is required when calling `assignUserId`.");if(!r.cluster)throw new Error("Parameter `assignUserIdParams.cluster` is required when calling `assignUserId`.");const a={};void 0!==e&&(a["X-Algolia-User-ID"]=e.toString());const n={method:"POST",path:"/1/clusters/mapping",queryParameters:{},headers:a,data:r};return o.request(n,t)},batch({indexName:e,batchWriteParams:r},t){if(!e)throw new Error("Parameter `indexName` is required when calling `batch`.");if(!r)throw new Error("Parameter `batchWriteParams` is required when calling `batch`.");if(!r.requests)throw new Error("Parameter `batchWriteParams.requests` is required when calling `batch`.");const a={method:"POST",path:"/1/indexes/{indexName}/batch".replace("{indexName}",encodeURIComponent(e)),queryParameters:{},headers:{},data:r};return o.request(a,t)},batchAssignUserIds({xAlgoliaUserID:e,batchAssignUserIdsParams:r},t){if(!e)throw new Error("Parameter `xAlgoliaUserID` is required when calling `batchAssignUserIds`.");if(!r)throw new Error("Parameter `batchAssignUserIdsParams` is required when calling `batchAssignUserIds`.");if(!r.cluster)throw new Error("Parameter `batchAssignUserIdsParams.cluster` is required when calling `batchAssignUserIds`.");if(!r.users)throw new Error("Parameter `batchAssignUserIdsParams.users` is required when calling `batchAssignUserIds`.");const a={};void 0!==e&&(a["X-Algolia-User-ID"]=e.toString());const n={method:"POST",path:"/1/clusters/mapping/batch",queryParameters:{},headers:a,data:r};return o.request(n,t)},batchDictionaryEntries({dictionaryName:e,batchDictionaryEntriesParams:r},t){if(!e)throw new Error("Parameter `dictionaryName` is required when calling `batchDictionaryEntries`.");if(!r)throw new Error("Parameter `batchDictionaryEntriesParams` is required when calling `batchDictionaryEntries`.");if(!r.requests)throw new Error("Parameter `batchDictionaryEntriesParams.requests` is required when calling `batchDictionaryEntries`.");const a={method:"POST",path:"/1/dictionaries/{dictionaryName}/batch".replace("{dictionaryName}",encodeURIComponent(e)),queryParameters:{},headers:{},data:r};return o.request(a,t)},browse({indexName:e,browseParams:r},t){if(!e)throw new Error("Parameter `indexName` is required when calling `browse`.");const a={method:"POST",path:"/1/indexes/{indexName}/browse".replace("{indexName}",encodeURIComponent(e)),queryParameters:{},headers:{},data:r||{}};return o.request(a,t)},clearObjects({indexName:e},r){if(!e)throw new Error("Parameter `indexName` is required when calling `clearObjects`.");const t={method:"POST",path:"/1/indexes/{indexName}/clear".replace("{indexName}",encodeURIComponent(e)),queryParameters:{},headers:{}};return o.request(t,r)},clearRules({indexName:e,forwardToReplicas:r},t){if(!e)throw new Error("Parameter `indexName` is required when calling `clearRules`.");const a="/1/indexes/{indexName}/rules/clear".replace("{indexName}",encodeURIComponent(e)),n={};void 0!==r&&(n.forwardToReplicas=r.toString());const s={method:"POST",path:a,queryParameters:n,headers:{}};return o.request(s,t)},clearSynonyms({indexName:e,forwardToReplicas:r},t){if(!e)throw new Error("Parameter `indexName` is required when calling `clearSynonyms`.");const a="/1/indexes/{indexName}/synonyms/clear".replace("{indexName}",encodeURIComponent(e)),n={};void 0!==r&&(n.forwardToReplicas=r.toString());const s={method:"POST",path:a,queryParameters:n,headers:{}};return o.request(s,t)},customDelete({path:e,parameters:r},t){if(!e)throw new Error("Parameter `path` is required when calling `customDelete`.");const a={method:"DELETE",path:"/{path}".replace("{path}",e),queryParameters:r||{},headers:{}};return o.request(a,t)},customGet({path:e,parameters:r},t){if(!e)throw new Error("Parameter `path` is required when calling `customGet`.");const a={method:"GET",path:"/{path}".replace("{path}",e),queryParameters:r||{},headers:{}};return o.request(a,t)},customPost({path:e,parameters:r,body:t},a){if(!e)throw new Error("Parameter `path` is required when calling `customPost`.");const n={method:"POST",path:"/{path}".replace("{path}",e),queryParameters:r||{},headers:{},data:t||{}};return o.request(n,a)},customPut({path:e,parameters:r,body:t},a){if(!e)throw new Error("Parameter `path` is required when calling `customPut`.");const n={method:"PUT",path:"/{path}".replace("{path}",e),queryParameters:r||{},headers:{},data:t||{}};return o.request(n,a)},deleteApiKey({key:e},r){if(!e)throw new Error("Parameter `key` is required when calling `deleteApiKey`.");const t={method:"DELETE",path:"/1/keys/{key}".replace("{key}",encodeURIComponent(e)),queryParameters:{},headers:{}};return o.request(t,r)},deleteBy({indexName:e,deleteByParams:r},t){if(!e)throw new Error("Parameter `indexName` is required when calling `deleteBy`.");if(!r)throw new Error("Parameter `deleteByParams` is required when calling `deleteBy`.");const a={method:"POST",path:"/1/indexes/{indexName}/deleteByQuery".replace("{indexName}",encodeURIComponent(e)),queryParameters:{},headers:{},data:r};return o.request(a,t)},deleteIndex({indexName:e},r){if(!e)throw new Error("Parameter `indexName` is required when calling `deleteIndex`.");const t={method:"DELETE",path:"/1/indexes/{indexName}".replace("{indexName}",encodeURIComponent(e)),queryParameters:{},headers:{}};return o.request(t,r)},deleteObject({indexName:e,objectID:r},t){if(!e)throw new Error("Parameter `indexName` is required when calling `deleteObject`.");if(!r)throw new Error("Parameter `objectID` is required when calling `deleteObject`.");const a={method:"DELETE",path:"/1/indexes/{indexName}/{objectID}".replace("{indexName}",encodeURIComponent(e)).replace("{objectID}",encodeURIComponent(r)),queryParameters:{},headers:{}};return o.request(a,t)},deleteRule({indexName:e,objectID:r,forwardToReplicas:t},a){if(!e)throw new Error("Parameter `indexName` is required when calling `deleteRule`.");if(!r)throw new Error("Parameter `objectID` is required when calling `deleteRule`.");const n="/1/indexes/{indexName}/rules/{objectID}".replace("{indexName}",encodeURIComponent(e)).replace("{objectID}",encodeURIComponent(r)),s={};void 0!==t&&(s.forwardToReplicas=t.toString());const i={method:"DELETE",path:n,queryParameters:s,headers:{}};return o.request(i,a)},deleteSource({source:e},r){if(!e)throw new Error("Parameter `source` is required when calling `deleteSource`.");const t={method:"DELETE",path:"/1/security/sources/{source}".replace("{source}",encodeURIComponent(e)),queryParameters:{},headers:{}};return o.request(t,r)},deleteSynonym({indexName:e,objectID:r,forwardToReplicas:t},a){if(!e)throw new Error("Parameter `indexName` is required when calling `deleteSynonym`.");if(!r)throw new Error("Parameter `objectID` is required when calling `deleteSynonym`.");const n="/1/indexes/{indexName}/synonyms/{objectID}".replace("{indexName}",encodeURIComponent(e)).replace("{objectID}",encodeURIComponent(r)),s={};void 0!==t&&(s.forwardToReplicas=t.toString());const i={method:"DELETE",path:n,queryParameters:s,headers:{}};return o.request(i,a)},getApiKey({key:e},r){if(!e)throw new Error("Parameter `key` is required when calling `getApiKey`.");const t={method:"GET",path:"/1/keys/{key}".replace("{key}",encodeURIComponent(e)),queryParameters:{},headers:{}};return o.request(t,r)},getDictionaryLanguages(e){const r={method:"GET",path:"/1/dictionaries/*/languages",queryParameters:{},headers:{}};return o.request(r,e)},getDictionarySettings(e){const r={method:"GET",path:"/1/dictionaries/*/settings",queryParameters:{},headers:{}};return o.request(r,e)},getLogs({offset:e,length:r,indexName:t,type:a}={},n=void 0){const s={};void 0!==e&&(s.offset=e.toString()),void 0!==r&&(s.length=r.toString()),void 0!==t&&(s.indexName=t.toString()),void 0!==a&&(s.type=a.toString());const i={method:"GET",path:"/1/logs",queryParameters:s,headers:{}};return o.request(i,n)},getObject({indexName:e,objectID:r,attributesToRetrieve:t},a){if(!e)throw new Error("Parameter `indexName` is required when calling `getObject`.");if(!r)throw new Error("Parameter `objectID` is required when calling `getObject`.");const n="/1/indexes/{indexName}/{objectID}".replace("{indexName}",encodeURIComponent(e)).replace("{objectID}",encodeURIComponent(r)),s={};void 0!==t&&(s.attributesToRetrieve=t.toString());const i={method:"GET",path:n,queryParameters:s,headers:{}};return o.request(i,a)},getObjects(e,r){if(!e)throw new Error("Parameter `getObjectsParams` is required when calling `getObjects`.");if(!e.requests)throw new Error("Parameter `getObjectsParams.requests` is required when calling `getObjects`.");const t={method:"POST",path:"/1/indexes/*/objects",queryParameters:{},headers:{},data:e,useReadTransporter:!0,cacheable:!0};return o.request(t,r)},getRule({indexName:e,objectID:r},t){if(!e)throw new Error("Parameter `indexName` is required when calling `getRule`.");if(!r)throw new Error("Parameter `objectID` is required when calling `getRule`.");const a={method:"GET",path:"/1/indexes/{indexName}/rules/{objectID}".replace("{indexName}",encodeURIComponent(e)).replace("{objectID}",encodeURIComponent(r)),queryParameters:{},headers:{}};return o.request(a,t)},getSettings({indexName:e},r){if(!e)throw new Error("Parameter `indexName` is required when calling `getSettings`.");const t={method:"GET",path:"/1/indexes/{indexName}/settings".replace("{indexName}",encodeURIComponent(e)),queryParameters:{},headers:{}};return o.request(t,r)},getSources(e){const r={method:"GET",path:"/1/security/sources",queryParameters:{},headers:{}};return o.request(r,e)},getSynonym({indexName:e,objectID:r},t){if(!e)throw new Error("Parameter `indexName` is required when calling `getSynonym`.");if(!r)throw new Error("Parameter `objectID` is required when calling `getSynonym`.");const a={method:"GET",path:"/1/indexes/{indexName}/synonyms/{objectID}".replace("{indexName}",encodeURIComponent(e)).replace("{objectID}",encodeURIComponent(r)),queryParameters:{},headers:{}};return o.request(a,t)},getTask({indexName:e,taskID:r},t){if(!e)throw new Error("Parameter `indexName` is required when calling `getTask`.");if(!r)throw new Error("Parameter `taskID` is required when calling `getTask`.");const a={method:"GET",path:"/1/indexes/{indexName}/task/{taskID}".replace("{indexName}",encodeURIComponent(e)).replace("{taskID}",encodeURIComponent(r)),queryParameters:{},headers:{}};return o.request(a,t)},getTopUserIds(e){const r={method:"GET",path:"/1/clusters/mapping/top",queryParameters:{},headers:{}};return o.request(r,e)},getUserId({userID:e},r){if(!e)throw new Error("Parameter `userID` is required when calling `getUserId`.");const t={method:"GET",path:"/1/clusters/mapping/{userID}".replace("{userID}",encodeURIComponent(e)),queryParameters:{},headers:{}};return o.request(t,r)},hasPendingMappings({getClusters:e}={},r=void 0){const t={};void 0!==e&&(t.getClusters=e.toString());const a={method:"GET",path:"/1/clusters/mapping/pending",queryParameters:t,headers:{}};return o.request(a,r)},listApiKeys(e){const r={method:"GET",path:"/1/keys",queryParameters:{},headers:{}};return o.request(r,e)},listClusters(e){const r={method:"GET",path:"/1/clusters",queryParameters:{},headers:{}};return o.request(r,e)},listIndices({page:e,hitsPerPage:r}={},t=void 0){const a={};void 0!==e&&(a.page=e.toString()),void 0!==r&&(a.hitsPerPage=r.toString());const n={method:"GET",path:"/1/indexes",queryParameters:a,headers:{}};return o.request(n,t)},listUserIds({page:e,hitsPerPage:r}={},t=void 0){const a={};void 0!==e&&(a.page=e.toString()),void 0!==r&&(a.hitsPerPage=r.toString());const n={method:"GET",path:"/1/clusters/mapping",queryParameters:a,headers:{}};return o.request(n,t)},multipleBatch(e,r){if(!e)throw new Error("Parameter `batchParams` is required when calling `multipleBatch`.");if(!e.requests)throw new Error("Parameter `batchParams.requests` is required when calling `multipleBatch`.");const t={method:"POST",path:"/1/indexes/*/batch",queryParameters:{},headers:{},data:e};return o.request(t,r)},operationIndex({indexName:e,operationIndexParams:r},t){if(!e)throw new Error("Parameter `indexName` is required when calling `operationIndex`.");if(!r)throw new Error("Parameter `operationIndexParams` is required when calling `operationIndex`.");if(!r.operation)throw new Error("Parameter `operationIndexParams.operation` is required when calling `operationIndex`.");if(!r.destination)throw new Error("Parameter `operationIndexParams.destination` is required when calling `operationIndex`.");const a={method:"POST",path:"/1/indexes/{indexName}/operation".replace("{indexName}",encodeURIComponent(e)),queryParameters:{},headers:{},data:r};return o.request(a,t)},partialUpdateObject({indexName:e,objectID:r,attributesToUpdate:t,createIfNotExists:a},n){if(!e)throw new Error("Parameter `indexName` is required when calling `partialUpdateObject`.");if(!r)throw new Error("Parameter `objectID` is required when calling `partialUpdateObject`.");if(!t)throw new Error("Parameter `attributesToUpdate` is required when calling `partialUpdateObject`.");const s="/1/indexes/{indexName}/{objectID}/partial".replace("{indexName}",encodeURIComponent(e)).replace("{objectID}",encodeURIComponent(r)),i={};void 0!==a&&(i.createIfNotExists=a.toString());const c={method:"POST",path:s,queryParameters:i,headers:{},data:t};return o.request(c,n)},removeUserId({userID:e},r){if(!e)throw new Error("Parameter `userID` is required when calling `removeUserId`.");const t={method:"DELETE",path:"/1/clusters/mapping/{userID}".replace("{userID}",encodeURIComponent(e)),queryParameters:{},headers:{}};return o.request(t,r)},replaceSources({source:e},r){if(!e)throw new Error("Parameter `source` is required when calling `replaceSources`.");const t={method:"PUT",path:"/1/security/sources",queryParameters:{},headers:{},data:e};return o.request(t,r)},restoreApiKey({key:e},r){if(!e)throw new Error("Parameter `key` is required when calling `restoreApiKey`.");const t={method:"POST",path:"/1/keys/{key}/restore".replace("{key}",encodeURIComponent(e)),queryParameters:{},headers:{}};return o.request(t,r)},saveObject({indexName:e,body:r},t){if(!e)throw new Error("Parameter `indexName` is required when calling `saveObject`.");if(!r)throw new Error("Parameter `body` is required when calling `saveObject`.");const a={method:"POST",path:"/1/indexes/{indexName}".replace("{indexName}",encodeURIComponent(e)),queryParameters:{},headers:{},data:r};return o.request(a,t)},saveRule({indexName:e,objectID:r,rule:t,forwardToReplicas:a},n){if(!e)throw new Error("Parameter `indexName` is required when calling `saveRule`.");if(!r)throw new Error("Parameter `objectID` is required when calling `saveRule`.");if(!t)throw new Error("Parameter `rule` is required when calling `saveRule`.");if(!t.objectID)throw new Error("Parameter `rule.objectID` is required when calling `saveRule`.");const s="/1/indexes/{indexName}/rules/{objectID}".replace("{indexName}",encodeURIComponent(e)).replace("{objectID}",encodeURIComponent(r)),i={};void 0!==a&&(i.forwardToReplicas=a.toString());const c={method:"PUT",path:s,queryParameters:i,headers:{},data:t};return o.request(c,n)},saveRules({indexName:e,rules:r,forwardToReplicas:t,clearExistingRules:a},n){if(!e)throw new Error("Parameter `indexName` is required when calling `saveRules`.");if(!r)throw new Error("Parameter `rules` is required when calling `saveRules`.");const s="/1/indexes/{indexName}/rules/batch".replace("{indexName}",encodeURIComponent(e)),i={};void 0!==t&&(i.forwardToReplicas=t.toString()),void 0!==a&&(i.clearExistingRules=a.toString());const c={method:"POST",path:s,queryParameters:i,headers:{},data:r};return o.request(c,n)},saveSynonym({indexName:e,objectID:r,synonymHit:t,forwardToReplicas:a},n){if(!e)throw new Error("Parameter `indexName` is required when calling `saveSynonym`.");if(!r)throw new Error("Parameter `objectID` is required when calling `saveSynonym`.");if(!t)throw new Error("Parameter `synonymHit` is required when calling `saveSynonym`.");if(!t.objectID)throw new Error("Parameter `synonymHit.objectID` is required when calling `saveSynonym`.");if(!t.type)throw new Error("Parameter `synonymHit.type` is required when calling `saveSynonym`.");const s="/1/indexes/{indexName}/synonyms/{objectID}".replace("{indexName}",encodeURIComponent(e)).replace("{objectID}",encodeURIComponent(r)),i={};void 0!==a&&(i.forwardToReplicas=a.toString());const c={method:"PUT",path:s,queryParameters:i,headers:{},data:t};return o.request(c,n)},saveSynonyms({indexName:e,synonymHit:r,forwardToReplicas:t,replaceExistingSynonyms:a},n){if(!e)throw new Error("Parameter `indexName` is required when calling `saveSynonyms`.");if(!r)throw new Error("Parameter `synonymHit` is required when calling `saveSynonyms`.");const s="/1/indexes/{indexName}/synonyms/batch".replace("{indexName}",encodeURIComponent(e)),i={};void 0!==t&&(i.forwardToReplicas=t.toString()),void 0!==a&&(i.replaceExistingSynonyms=a.toString());const c={method:"POST",path:s,queryParameters:i,headers:{},data:r};return o.request(c,n)},search(e,r){if(e&&Array.isArray(e)){const r={requests:e.map((({params:e,...r})=>"facet"===r.type?{...r,...e,type:"facet"}:{...r,...e,facet:void 0,maxFacetHits:void 0,facetQuery:void 0}))};e=r}if(!e)throw new Error("Parameter `searchMethodParams` is required when calling `search`.");if(!e.requests)throw new Error("Parameter `searchMethodParams.requests` is required when calling `search`.");const t={method:"POST",path:"/1/indexes/*/queries",queryParameters:{},headers:{},data:e,useReadTransporter:!0,cacheable:!0};return o.request(t,r)},searchDictionaryEntries({dictionaryName:e,searchDictionaryEntriesParams:r},t){if(!e)throw new Error("Parameter `dictionaryName` is required when calling `searchDictionaryEntries`.");if(!r)throw new Error("Parameter `searchDictionaryEntriesParams` is required when calling `searchDictionaryEntries`.");if(!r.query)throw new Error("Parameter `searchDictionaryEntriesParams.query` is required when calling `searchDictionaryEntries`.");const a={method:"POST",path:"/1/dictionaries/{dictionaryName}/search".replace("{dictionaryName}",encodeURIComponent(e)),queryParameters:{},headers:{},data:r,useReadTransporter:!0,cacheable:!0};return o.request(a,t)},searchForFacetValues({indexName:e,facetName:r,searchForFacetValuesRequest:t},a){if(!e)throw new Error("Parameter `indexName` is required when calling `searchForFacetValues`.");if(!r)throw new Error("Parameter `facetName` is required when calling `searchForFacetValues`.");const n={method:"POST",path:"/1/indexes/{indexName}/facets/{facetName}/query".replace("{indexName}",encodeURIComponent(e)).replace("{facetName}",encodeURIComponent(r)),queryParameters:{},headers:{},data:t||{},useReadTransporter:!0,cacheable:!0};return o.request(n,a)},searchRules({indexName:e,searchRulesParams:r},t){if(!e)throw new Error("Parameter `indexName` is required when calling `searchRules`.");const a={method:"POST",path:"/1/indexes/{indexName}/rules/search".replace("{indexName}",encodeURIComponent(e)),queryParameters:{},headers:{},data:r||{},useReadTransporter:!0,cacheable:!0};return o.request(a,t)},searchSingleIndex({indexName:e,searchParams:r},t){if(!e)throw new Error("Parameter `indexName` is required when calling `searchSingleIndex`.");const a={method:"POST",path:"/1/indexes/{indexName}/query".replace("{indexName}",encodeURIComponent(e)),queryParameters:{},headers:{},data:r||{},useReadTransporter:!0,cacheable:!0};return o.request(a,t)},searchSynonyms({indexName:e,searchSynonymsParams:r},t){if(!e)throw new Error("Parameter `indexName` is required when calling `searchSynonyms`.");const a={method:"POST",path:"/1/indexes/{indexName}/synonyms/search".replace("{indexName}",encodeURIComponent(e)),queryParameters:{},headers:{},data:r||{},useReadTransporter:!0,cacheable:!0};return o.request(a,t)},searchUserIds(e,r){if(!e)throw new Error("Parameter `searchUserIdsParams` is required when calling `searchUserIds`.");if(!e.query)throw new Error("Parameter `searchUserIdsParams.query` is required when calling `searchUserIds`.");const t={method:"POST",path:"/1/clusters/mapping/search",queryParameters:{},headers:{},data:e,useReadTransporter:!0,cacheable:!0};return o.request(t,r)},setDictionarySettings(e,r){if(!e)throw new Error("Parameter `dictionarySettingsParams` is required when calling `setDictionarySettings`.");if(!e.disableStandardEntries)throw new Error("Parameter `dictionarySettingsParams.disableStandardEntries` is required when calling `setDictionarySettings`.");const t={method:"PUT",path:"/1/dictionaries/*/settings",queryParameters:{},headers:{},data:e};return o.request(t,r)},setSettings({indexName:e,indexSettings:r,forwardToReplicas:t},a){if(!e)throw new Error("Parameter `indexName` is required when calling `setSettings`.");if(!r)throw new Error("Parameter `indexSettings` is required when calling `setSettings`.");const n="/1/indexes/{indexName}/settings".replace("{indexName}",encodeURIComponent(e)),s={};void 0!==t&&(s.forwardToReplicas=t.toString());const i={method:"PUT",path:n,queryParameters:s,headers:{},data:r};return o.request(i,a)},updateApiKey({key:e,apiKey:r},t){if(!e)throw new Error("Parameter `key` is required when calling `updateApiKey`.");if(!r)throw new Error("Parameter `apiKey` is required when calling `updateApiKey`.");if(!r.acl)throw new Error("Parameter `apiKey.acl` is required when calling `updateApiKey`.");const a={method:"PUT",path:"/1/keys/{key}".replace("{key}",encodeURIComponent(e)),queryParameters:{},headers:{},data:r};return o.request(a,t)}}}({appId:e,apiKey:t,timeouts:{connect:1e3,read:2e3,write:3e4},requester:{send:function send(e){return new Promise((r=>{const t=new XMLHttpRequest;t.open(e.method,e.url,!0),Object.keys(e.headers).forEach((r=>t.setRequestHeader(r,e.headers[r])));const createTimeout=(e,a)=>setTimeout((()=>{t.abort(),r({status:0,content:a,isTimedOut:!0})}),e),a=createTimeout(e.connectTimeout,"Connection timeout");let n;t.onreadystatechange=()=>{t.readyState>t.OPENED&&void 0===n&&(clearTimeout(a),n=createTimeout(e.responseTimeout,"Socket timeout"))},t.onerror=()=>{0===t.status&&(clearTimeout(a),clearTimeout(n),r({content:t.responseText||"Network request failed",status:t.status,isTimedOut:!1}))},t.onload=()=>{clearTimeout(a),clearTimeout(n),r({content:t.responseText,status:t.status,isTimedOut:!1})},t.send(e.data)}))}},algoliaAgents:[{segment:"Browser"}],authMode:"WithinQueryParameters",responsesCache:createMemoryCache(),requestsCache:createMemoryCache({serializable:!1}),hostsCache:createFallbackableCache({caches:[createBrowserLocalStorageCache({key:`${r}-${e}`}),createMemoryCache()]}),...a})}var a=__webpack_require__(424),n=__webpack_require__.n(a);class AgSearchInsightsUtil{constructor(e){if(this.singleton$=new ObserverLite({key:"AgSearchInsightsUtil$"}),!e)return new Promise((async(e,r)=>{e(await this.singleton$.once())}));this.settings=e,this.init()}async init(){n()("init",{appId:this.settings.app_id,apiKey:this.settings.search_api_key,useCookie:!1}),this.singleton$.next(this);const e=new ObserverLite({key:"Shopify.customerPrivacyApi"}),{analyticsAllowed:r}=await e.once();r&&n()("init",{appId:this.settings.app_id,apiKey:this.settings.search_api_key,useCookie:!0})}sendItemClickEvent(e){n()("clickedObjectIDsAfterSearch",{eventName:"Product Clicked",index:e.index,objectIDs:e.objectIDs})}}class AgSearchUtil{constructor(e){this.settings=e,this.client=searchClient(this.settings.app_id,this.settings.search_api_key)}search({query:e,indexes:r,merge:t}){return new Promise(((a,n)=>{r?.length&&e||n({error:"no terms or indexes"}),this.client.search({requests:r.map((({indexName:r,hitsPerPage:t,facets:a,facetFilters:n,attributesToRetrieve:s})=>({indexName:r,query:e,hitsPerPage:t=t||10,facets:a=a||["*"],facetFilters:n,attributesToRetrieve:s=s||["*"]})))}).then((({results:e})=>{if(e=(e=e.map((e=>(e.hits=e.hits.map((r=>(r.agSearchIndexName=e.index,r))),e)))).reduce(((e,t)=>(e[r.find((({indexName:e})=>e==t.index))?.key||t.index]=t,e)),{}),t){const r=t.indexes.map((r=>e[r].hits)).flat(1);t.hits=r,t.merge=!0,t.datasets=t.indexes.map((r=>e[r])).flat(1),t.indexes.forEach((r=>delete e[r])),e[t.key]=t}a(e)})).catch((e=>{n({error:e})}))}))}}})();var a=self;for(var n in t)a[n]=t[n];t.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})();