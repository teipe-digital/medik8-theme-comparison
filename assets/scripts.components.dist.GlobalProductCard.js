(()=>{"use strict";var t={d:(n,a)=>{for(var e in a)t.o(a,e)&&!t.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:a[e]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{GlobalProductCard:()=>GlobalProductCard});class ShopifyUtils{constructor(t){this.money_format=t.money_format||"Â£{{amount}}"}handleize(t){return t.toLowerCase().replace(/[^\w\u00C0-\u024f]+/g,"-").replace(/^-+|-+$/g,"")}parseImgUrl(t,n){const a=t.includes(".png")?"png":"jpg";return`${t.split("png"==a?".png":".jpg")[0]}_${n}x.${a}`}formatMoney(t,n){"string"==typeof t&&(t=t.replace(".",""));var a="",e=/\{\{\s*(\w+)\s*\}\}/,i=n||this.money_format;function defaultOption(t,n){return void 0===t?n:t}function formatWithDelimiters(t,n,a,e){if(n=defaultOption(n,2),a=defaultOption(a,","),e=defaultOption(e,"."),isNaN(t)||null==t)return 0;var i=(t=(t/100).toFixed(n)).split(".");return i[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+a)+(i[1]?e+i[1]:"")}switch(i.match(e)[1]){case"amount":a=formatWithDelimiters(t,2);break;case"amount_no_decimals":a=formatWithDelimiters(t,0);break;case"amount_optional_decimals":a=formatWithDelimiters(t,2),a=Number(a)%1==0?Number(a).toFixed(0):a;break;case"amount_with_comma_separator":a=formatWithDelimiters(t,2,".",",");break;case"amount_with_period_separator":a=formatWithDelimiters(t,2,",",".");break;case"amount_no_decimals_with_comma_separator":a=formatWithDelimiters(t,0,".",",")}return i.replace(e,a)}}class GlobalProductCard extends HTMLElement{constructor(){super(),this.ObserverLite=new ObserverLite;const t=`${window.cartCurrencySymbol}{{amount_optional_decimals}}`;this.ShopifyUtils=new ShopifyUtils({money_format:t})}connectedCallback(){DomReadyPromise().then((async()=>{const t=this.querySelector(":scope > template");if(t)try{this.settings=JSON.parse(t.innerHTML),t.remove()}catch(t){return console.log(t),void this.remove()}this.#t(),this.settings&&(this.innerHTML=await this.#n()),this.#a()})).catch((t=>{console.log(t)}))}#t(){if(!window.GlobalProductCardMounted){const t='\n        <style type="text/css">\n          .gpc__img-wrapper{\n            margin:10px 0;\n            position:relative;\n          }\n\n          global-product-card .hover-img {\n            position: absolute;\n            top: 0;\n            z-index: -1;\n            opacity: 0;\n          }\n\n          @media all and (min-width: 768px) {\n            global-product-card:hover .hover-img {\n              z-index: 1;\n              opacity: 1;\n            }\n\n            global-product-card:hover .gpc__badge {\n              display: none;\n            }\n\n            global-product-card:hover .gpc__button-bar {\n              display: flex;\n              flex-direction: column-reverse;\n            }\n\n            global-product-card:not(:hover) .gpc__wishlist{\n              opacity: 0;\n            }\n          }\n\n          global-product-card #loyaltylion .lion-action-button {\n            background: black;\n            width: 100%;\n          }\n\n          global-product-card #loyaltylion .lion-action-button--disabled {\n            background: var(--grey);\n            border-color: var(--grey);\n          }\n\n          @media all and (min-width: 1100px) {\n            global-product-card:hover .gpc__button-bar {\n              flex-direction: row;\n            }\n          }\n\n          .gpc__badge {\n            position: absolute;\n            bottom: 10px;\n            left: 10px;\n            background: #F6F6F6;\n            border-radius: 5px;\n            padding: 4px 12px;\n          }\n\n          .template-index.dark-mode .gpc__badge {\n            background: var(--body-Background);\n          }\n\n          .gpc__button-bar {\n            display: none;\n            position: absolute;\n            bottom: 0px;\n            gap: 15px;\n            padding: 0 15px 15px;\n            z-index: 10;\n          }\n\n          .gpc__button-bar--redemption {\n            display: block;\n          }\n\n          .gpc__button {\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            border: 1px solid #000;\n            border-radius: 5px;\n            min-height: 3em;\n            line-height: normal;\n          }\n\n          .gpc__button--primary {\n            background: #000;\n            color: #FFF;\n          }\n\n          .gpc__button--primary:hover {\n            background: #FFF;\n            color: #000;\n            transition: all .1s ease-in;\n          }\n\n          .gpc__button--secondary {\n            background: #FFF;\n            color: #000;\n          }\n\n          .gpc__button--secondary:hover {\n            background: #000;\n            color: #FFF;\n            transition: all .1s ease-in;\n          }         \n            \n          .gpc__size--separator::after {\n            content: "|";\n            padding: 0 7px 0 4px;\n          }\n\n          .gpc__wishlist {\n            position: absolute;\n            top: 18px;\n            right: 8px;\n            z-index: 3;\n          }\n\n          .gpc__wishlist-wrapper {\n            background: #FFFFFFCC;\n            width: 24px;\n            height: 24px;\n            border-radius: 50%;\n          }\n\n          .gpc__wishlist-wrapper button {\n            margin-top: 2px !important;\n          }\n\n          .gpc__wishlist-wrapper .swym-button.swym-add-to-wishlist-view-product.swym-added {\n            opacity: 1;\n          }\n\n          .gpc__atb-btn {\n            position: absolute;\n            right: 5px;\n            bottom: 5px;\n            background:#fff;\n            width:28px;\n            height:28px;\n          }\n\n          @media all and (min-width: 768px) {\n            .gpc__atb-btn {\n              display: none;\n            }\n          }\n        </style>\n      ';window.GlobalProductCardMounted=!0,document.body.append(parseHTML(t))}}async#a(){this.quickViewToggle=this.querySelector("[data-product]"),this.quickViewToggle?.addEventListener("click",(t=>{t.preventDefault(),window.onQuickViewClick(this.quickViewToggle)})),this.GlobalCart=await new GlobalCart;const t=this.querySelector(".gpc__atb-btn");t.addEventListener("click",(n=>{t.disabled=!0,t.dataset.loading=!0;const a={items:[{id:this.settings.product.id,quantity:1}]};this.GlobalCart.addToCart(a).then((()=>{t.disabled=!1,t.dataset.loading=!1}))})),this.ObserverLite.next()}#e({src:t,alt:n,sizes:a,width:e,classList:i}){return`\n      <img \n        srcset="${(a=a||[512,256,128]).map((n=>{return`${t}${a=t,a.includes("?")?"&":"?"} ${n}w`;var a})).join(", ")}" \n        alt="${n}"  \n        width="${e}" \n        height="${e}" \n        class="${i}"\n        loading="lazy">\n    `}async#i(t){const n=t.compare?" f-w600":"",a=`<span class='price-v2__${Number(t.id)}${n}'>${this.ShopifyUtils.formatMoney(t.price)}</span>`;let e=t.compare?`<s class="cell-r--d3">${this.ShopifyUtils.formatMoney(t.compare)}</s>${a}`:a;sitewide&&(e=await sitewide.updateGlobalProductPriceV2(t.id,e));const i="0"!=t.size_variant&&t.size_variant||t.size_product;return`${i?`<span class="gpc__size--separator">${i}</span>`:""}${e}`}async#o(t,n){let a=t.compare||t.badge,e=a?`<span class='badge-v2 badge-v2__product-card block-z3' aria-label='${a}'>${a}</span>`:"";return sitewide&&(e=await sitewide.updateGlobalProductThumbnailLabelV2(t.id,e)),`\n      <div class="label-wrapper label-wrapper__${t.id}" data-type="product-card"\n        aria-label="Label for ${n}">\n        ${e}\n      </div>\n    `}#r(t){return"Bundles"===t.product_type?`<button class="btn--full gpc__button gpc__button--primary t-ucase t-xxs">\n      <span class="text">${this.settings.translations.view_bundle}</span>\n    </button>`:`<form action="/cart/add" method="post" enctype="multipart/form-data" class="flex_1">\n      <input type="hidden" name="id" value="${t.id}">\n      <input min="1" type="hidden" name="quantity" value="1" data-variant-id="${t.id}" data-variant-inventory-qty="${t.inventory_quantity}">\n      <button class="btn--full gpc__button gpc__button--primary t-ucase t-xxs" onclick="GlobalCartMain.addProductFromButton(event)" aria-label="Add To Bag">\n        <span class="text">${this.settings.translations.add_to_cart}</span>\n      </button>\n    </form>`}#s(t){return`\n      <button class="btn--full gpc__button gpc__button--secondary flex_1 t-ucase t-xxs" data-product="/products/${t.handle_product}?variant=${t.id}">\n        ${this.settings.translations.quickview}\n      </button>\n    `}buildReviews(t){return`\n      <a href="/products/${t.handle_product}#shopify-section-product-reviews-js" class="hotspot-reviews">\n        <div class="yotpo-widget-instance no-events" data-yotpo-instance-id="${window?.yotpoStarsInstanceId}" data-yotpo-product-id="${t.id_product}" data-yotpo-cart-product-id="" data-yotpo-section-id="${window?.yotpoSectionId}"></div>\n      </a>\n    `}async#d(t,n){return`\n      <div class="gpc__wishlist">\n        <div class="gpc__wishlist-wrapper flex justify-center align-center">\n          <button\n          aria-label="Add ${n} to wishlist" data-with-epi="true"\n          class="swym-button swym-add-to-wishlist-view-product product_${t.id_product}"\n          data-swaction="addToWishlist"\n          data-product-id="${t.id_product}"\n          data-variant-id="${t.id}"\n          data-product-url="${window.shopUrl}/${t.handle_product}"\n          ></button>\n        </div>\n      </div>\n    `}async#n(){const{product:t}=this.settings,n=this.#e({src:t.image_variant?t.image_variant:t.image_product,alt:t.title,width:512,classList:"d-block"}),a=t.images_product.length>1?this.#e({src:t.images_product[2]?t.images_product[2]:t.images_product[1],alt:`${t.title} hover`,width:512,classList:"d-block hover-img"}):"",e=this.#r(t),i=this.#s(t),o=t.title_variant&&!t.title_variant.includes("Default")?t.title_variant:t.title_product,r=t.tagline_variant?t.tagline_variant:t.subheading_product,s=t.routine?`<span class="gpc__badge t-xxs lh-16 block-z3">${t.routine}</span>`:"";return`\n      <div class="flex flex-grid--d3 column-nowrap justify-space block-rel block-fh">\n        <span class="gpc__img-wrapper">\n          <a href="/products/${t.handle_product}?variant=${t.id}" class="block-rel">\n            ${s}\n\n            ${await this.#o(t,o)}\n\n            ${n}\n            ${a}\n          </a>\n\n          <div class="gpc__button-bar ${"redemption"===this.settings.type?"gpc__button-bar--redemption":""} justify-space block-12/12">\n            ${"redemption"===this.settings.type?`\n                <span style="width:100%" data-lion-seamless-product-reward='${t.id_product}' data-variant-id='${t.id}'>\n                </span>\n              `:`\n                ${e}\n                ${i}\n              `}\n          </div>\n\n          ${"redemption"===this.settings.type?"":'\n            <button class="gpc__atb-btn btn-reset" aria-label="Add To Bag"></button>\n          '}\n        </span>\n\n        <a class="variant-title-container" href="/products/${t.handle_product}?variant=${t.id}">\n          <span class="variant-title ls-2 t-rm lh-20">\n            ${o}\n          </span>\n        </a>\n\n        <a href="/products/${t.handle_product}?variant=${t.id}"\n            class="flex flex-grid--d3 column-nowrap grow-1 justify-space t-xxs lh-18">\n          ${r}\n          ${this.buildReviews(t)}\n        </a>\n        \n        <div class="flex flex-grid--d3 column-nowrap">\n          <span class="ls-1_5 t-xxs f-w400 lh-18">\n            ${"redemption"===this.settings.type?"":await this.#i(t)}\n          </span>\n        </div>\n\n        ${await this.#d(t,o)}\n      </div>\n    `}}customElements.get("global-product-card")||customElements.define("global-product-card",GlobalProductCard);var a=self;for(var e in n)a[e]=n[e];n.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})();