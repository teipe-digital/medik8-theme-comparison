(()=>{"use strict";var e={d:(t,o)=>{for(var i in o)e.o(o,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:o[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{GlobalVideoThumbnail:()=>GlobalVideoThumbnail});class GlobalVideoThumbnail extends HTMLElement{constructor(){super()}connectedCallback(){DomReadyPromise().then((async()=>{let e=this.querySelector(":scope > template");if(e){try{this.settings=JSON.parse(e.innerHTML)}catch(e){console.log(e)}e.remove(),e=null}if(this.settings.video_id){this.style.cursor="pointer",this.dataset.hasVideo=!0;const e=`\n          <iframe \n            src="https://www.youtube.com/embed/${this.settings.video_id}?enablejsapi=1" \n            title="${this.settings.video_description}"  \n            allow="autoplay; encrypted-media">\n          </iframe>`;this.content=`\n          <div class="v2-video-modal flex row-wrap align-stretch justify-center" data-loading>\n            <button aria-label="close" class="modal-close modal-close-btn btn-reset"></button>\n            <div class="block-12/12 block-fh block-rel" style="aspect-ratio: ${this.settings.video_aspect_ratio}">\n              ${e}\n            </div>\n          </div>`,this.addEventListener("click",(e=>{this.handleClick()}))}})).catch((e=>{console.log(e)}))}playVideo(){"youtube"==this.settings.video_type&&this.videoIframe.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*")}pauseVideo(){"youtube"==this.settings.video_type&&this.videoIframe.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")}handleClick(){this.modal=this.modal||new ModalBox({content:this.content,settings:{containerCloseButton:!1,flexClass:"v2-video-modal-modalbox-flex"}}),this.modal.subscribe((({type:e})=>{if("open:rendered"==e){const e=this.modal.contentWrapper.querySelector("iframe");e.onload=()=>{this.videoIframe=e,this.videoIframe.parentNode.removeAttribute("data-loading"),this.playVideo()},setTimeout((()=>{this.videoIframe||(this.videoIframe=e,this.videoIframe.parentNode.removeAttribute("data-loading"),this.playVideo())}),2e3)}"open"==e&&this.videoIframe&&this.playVideo(),"close"==e&&this.videoIframe&&this.pauseVideo()})),this.modal.open()}}customElements.get("global-video-thumbnail")||customElements.define("global-video-thumbnail",GlobalVideoThumbnail);var o=self;for(var i in t)o[i]=t[i];t.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();