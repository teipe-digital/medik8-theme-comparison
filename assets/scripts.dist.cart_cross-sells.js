(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function KSnavigation(e){let t,s,i,r;function markup(a){!function wrapperMarkup(s){if(s){for(var i=t.parentNode;t.firstChild;)i.insertBefore(t.firstChild,t);return void removeElement(t)}t=createDiv("navigation-wrapper"),e.container.parentNode.appendChild(t),t.appendChild(e.container)}(a),function dotMarkup(i){if(i)return void removeElement(s);if(e.track.details&&isFinite(e.track.details.maxIdx)){s=createDiv("dots");[...Array(e.track.details.maxIdx+1).keys()].forEach(((t,i)=>{var r=createDiv("dot");r.addEventListener("click",(()=>e.moveToIdx(i))),s.appendChild(r)})),t.appendChild(s)}}(a),e.options.hideArrows||function arrowMarkup(s){if(s)return removeElement(i),void removeElement(r);i=createDiv("arrow arrow--left"),i.addEventListener("click",(()=>e.prev())),r=createDiv("arrow arrow--right"),r.addEventListener("click",(()=>e.next())),t.appendChild(i),t.appendChild(r)}(a)}function removeElement(e){e&&e.parentNode?.removeChild(e)}function createDiv(e){var t=document.createElement("div");return e.split(" ").forEach((e=>t.classList.add(e))),t}function updateClasses(){if(!e||!e.track.details)return;const t=!!e.container.parentNode.classList.contains("navigation-wrapper")&&e.container.parentNode;if(t){const s=!e.options.slides||e.slides.length<=e.options.slides.perView;t.classList.toggle("navigation-wrapper--no-padding",s)}var a=e.track.details.rel;s&&s.children.length&&(Array.from(s.children).forEach((function(e,t){t===a?e.classList.add("dot--active"):e.classList.remove("dot--active")})),s.style.display=e.slides.length<=e.options.slides.perView?"none":"flex"),i&&r&&(i.style.display=!e.options.slides||e.slides.length<=e.options.slides.perView?"none":"block",r.style.display=!e.options.slides||e.slides.length<=e.options.slides.perView?"none":"block",0===a?i.classList.add("arrow--disabled"):i.classList.remove("arrow--disabled"),a===e.track.details.slides.length-1?r.classList.add("arrow--disabled"):r.classList.remove("arrow--disabled"))}e.on("created",(()=>{markup(),updateClasses(),e.update()})),e.on("update",(()=>{updateClasses()})),e.on("optionsChanged",(()=>{markup(!0),markup(),updateClasses()})),e.on("slideChanged",(()=>{updateClasses()})),e.on("destroyed",(()=>{markup(!0)}))}e.r(t),e.d(t,{CartCrossSellItem:()=>CartCrossSellItem,CartCrossSells:()=>CartCrossSells});class CartCrossSells extends HTMLElement{constructor(){super(),this.ObserverLite=new ObserverLite}subscribe(e){return this.ObserverLite.subscribe(e)}next(e){this.ObserverLite.next(e)}connectedCallback(){DomReadyPromise().then((async()=>{const e=this.querySelector(":scope > template");if(e){try{this.settings=JSON.parse(e.innerHTML),e.remove()}catch(e){console.log(e)}if(this.settings){const e=this.attributes?.observer_key?.value||!1;if(e){const t=new ObserverLite({key:e});this.ObserverLite.subscribe((e=>{t.next(e)}))}this.sidebarCartSection=this.closest("sidebar-cart-section"),this.GlobalCart=await new GlobalCart,this.GlobalCart.subscribe((({discrete:e})=>{e||this.render()})),this.render()}}})).catch((e=>{console.log(e)}))}safeProductsFIlter(e){return e.filter((({title:e})=>!e.toLowerCase().includes("sample")))}getProducts(){return new Promise((async(e,t)=>{const s=this.safeProductsFIlter(this.GlobalCart.cart.items).reverse()[0];s?fetch(`${window.Shopify.routes.root}recommendations/products.json?product_id=${s.product_id}&limit=30&intent=related`).then((e=>e.json())).then((({products:t})=>{const{section_settings:s}=this.settings;(t=this.safeProductsFIlter(t)).length=t.length>s.limit?s.limit:t.length,e({products:t})})).catch((e=>{t({err:e})})):e({err:"no product to fetch"})}))}async render(){let{products:e,err:t}=await this.getProducts();if(t||!e?.length)return this.setAttribute("hidden",!0),void this.next({eventType:"ui:hidden"});this.removeAttribute("hidden"),this.next({eventType:"ui:show"});const{section_settings:s}=this.settings;this.innerHTML=`\n      <div class="block-rel cell-l cell-r tac row">\n        <h2 class="h-style f-w600 t-rm ls-5 lh-18 t-ucase">${s.title_text}</h2>\n      </div>\n      <div class="js-keen-slider keen-slider tac">\n        ${e.map((e=>{const{title:t,variants:s,featured_image:i,url:r}=e;return`\n              <div class="keen-slider__slide">\n                <cart-cross-sell-item class="d-block block-fh" >\n                  <template>\n                    {\n                      "subscriptions":${JSON.stringify(this.settings.subscriptions)},\n                      "translations":${JSON.stringify(this.settings.translations)},\n                      "product":${JSON.stringify({title:t,variants:s,featured_image:i,url:r})}\n                    }\n                  </template>\n                </cart-cross-sell-item>\n              </div>\n            `})).join("")}\n      </div>\n    \n    `,this.bind()}async bind(){this.ksSlider=new KeenSlider(this.querySelector(".js-keen-slider"),{loop:!1,slides:{perView:3,spacing:18},breakpoints:{"(max-width: 512px)":{slides:{perView:2,spacing:12}}}},[KSnavigation]);const e=new ObserverLite({key:"GlobalSidebar.SidebarCart"});(await e.once()).subscribe((e=>{setTimeout((()=>{this.ksSlider.update()}),500)}))}}customElements.define("cart-cross-sells",CartCrossSells);class CartCrossSellItem extends HTMLElement{constructor(){super()}connectedCallback(){DomReadyPromise().then((async()=>{const e=this.querySelector(":scope > template");if(e){try{const t=JSON.parse(e.innerHTML);this.product=t.product,this.translations=t.translations,this.subscriptions=t.subscriptions,e.remove()}catch(e){console.log(e)}this.product&&(this.GlobalCart=await new GlobalCart,this.render())}})).catch((e=>{console.log(e)}))}async onAtcClick(){this.dataset.cart_ui_loading=!0;const e={items:[{id:this.variant.id,quantity:1}]};this.GlobalCart.addToCart(e,!1).then((()=>{this.render()})).catch((e=>{let t=!!e?.data?.description&&e.data.description;this.render(t)}))}updateSelectedVariant(){this.variant=this.variant||this.product.variants[0],this.variant.inCart=this.GlobalCart.getLineItemsByVariantId(this.variant.id),this.variant.inCartTotals=this.variant.inCart.map((({quantity:e})=>e)).reduce(((e,t)=>e+t),0)}bind(){this.errorMessage=this.querySelector(".js-x-sell-message"),this.errorMessage&&(clearTimeout(this.errorMessageTimeout),this.errorMessageTimeout=setTimeout((()=>{this.errorMessage.remove()}),3e3)),this.atc=this.querySelector(".js-x-sell-add"),this.atc.addEventListener("click",(e=>{e.preventDefault(),this.onAtcClick()})),this.select=this.querySelector("select"),this.select&&this.select.addEventListener("change",(()=>{const e=this.select.value,t=this.product.variants.find((({id:t})=>t==e));t&&(this.variant=t,this.render())}))}async geThumbmainHTML(e){this.updateSelectedVariant();let{price:t,compare_at_price:s,id:i,inCart:r,inCartTotals:a}=this.variant;r=!!r.length&&r[0];const n=this.variant.featured_image||this.product.featured_image,l=`${this.product.url}&variant=${i}`;let o=s;r&&(o=t,t=r.original_price);const{currency_symbol:c}=this.GlobalCart;return`\n      <div class="block-mfrh flex flex-grid-y--d3 column-nowrap justify-top align-center">\n        <a class="flex flex-grid-y--d3 column-nowrap justify-left align-center flex-fill-height block-12/12" href="${l}">\n          <div class="block-rel block-12/12">\n            <img \n              class="block-12/12 d-block"\n              src="${n.src||n}?&width=128" \n              alt="${n.alt||this.product.title}" \n              loading="lazy" \n              width="128" \n              height="128">\n          </div>\n            <div class="flex flex-grid-y--d3 column-nowrap justify-space align-center  block-12/12">\n              <span class="block-12/12 f-w600 t-xxxs ls-5 lh-18 t-ucase">${this.product.title}</span>\n            </div>\n        </a>\n        <div class="flex flex-grid-y--d3 column-nowrap justify-space align-center block-12/12">\n          ${this.smallSelectHtml}\n          <div class="t-xxs ls-5 lh-18 flex row-wrap align-bottom justify-center">\n            ${await this.#e(i,t,s)}\n          </div>\n        \n          <button \n              class="js-x-sell-add btn sb-cart__btn btn--wfocus-state block-10/12" \n              ${6!=a&&this.variant.available?"":"disabled"}\n            >\n            \n              <span>${this.translations.add}</span>\n            </button>\n     \n        </div>\n      </div>\n        ${e?`<span class="js-x-sell-message t-xxs sb-cart-item__error tac">${e}</span>`:""}\n        \n    `}get smallSelectHtml(){return`\n      ${this.product.variants.length>1?`\n            <select name="option_select" class="block-12/12 select-alt-style select-alt-style--xs">\n              ${this.product.variants.filter((({available:e})=>e)).map((e=>`<option value="${e.id}" ${e.id==this.variant.id?"selected":""}>${e.options.join(" / ")}</option>`)).join("")}\n            </select>\n          `:""}\n    `}async#e(e,t,s){const i=s?" f-w600":"",r=`<span class='price-v2__${Number(e)}${i}'>${this.GlobalCart.ShopifyUtils.formatMoney(t)}</span>`;let a=s?`<s class="cell-r--d3">${this.GlobalCart.ShopifyUtils.formatMoney(s)}</s>${r}`:r;return sitewide&&(a=await sitewide.updateGlobalProductPriceV2(String(e),a)),a}async render(e){this.dataset.cart_ui_loading=!1,this.innerHTML=await this.geThumbmainHTML(e),this.bind()}}customElements.define("cart-cross-sell-item",CartCrossSellItem);var s=self;for(var i in t)s[i]=t[i];t.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();