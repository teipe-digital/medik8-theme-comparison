(()=>{"use strict";var e={d:(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{GlobalShowcaseSlider:()=>GlobalShowcaseSlider});class GlobalShowcaseSlider extends HTMLElement{constructor(){super()}connectedCallback(){DomReadyPromise().then((async()=>{let e=this.querySelector(":scope > template");if(e){try{this.settings=JSON.parse(e.innerHTML)}catch(e){console.log(e)}e.remove(),e=null}this.maxScaleFactor=1.5,this.slidesCtaBlockContent=this.settings.slidesCtaBlockContent,this.animateOnDrag=this.settings.features.animateOnDrag,this.sliderContainer=this.querySelector(".gss__carousel"),this.ctaBlock=this.querySelector(".gss-cta-block");const t=this.querySelector("global-carousel");await t.ObserverLite.once(),this.emblaApi=t.embla,this.emblaApi.on("reInit",(()=>{this.emblaReInit()})),this.emblaApi.on("scroll",(e=>{this.emblaScroll()})),this.emblaApi.on("select",(()=>{this.emblaSelect()})),this.initNavButtons(),this.setCarouselContainerHeight(),this.updateSlides(),this.sliderCanLoop()||this.duplicateSlides()})).catch((e=>{console.log(e)}))}emblaReInit(){this.setCarouselContainerHeight()}emblaScroll(){if(!this.animateOnDrag)return;const e=this.guesstimateClosestSlider(this.emblaApi);this.updateSlides(e)}emblaSelect(){this.updateSlides()}initNavButtons(){this.nextButton=this.querySelector(".js-gss__next"),this.prevButton=this.querySelector(".js-gss__prev"),this.nextButton?.addEventListener("click",(()=>{this.emblaApi.scrollNext()})),this.prevButton?.addEventListener("click",(()=>{this.emblaApi.scrollPrev()}))}guesstimateClosestSlider(e){const t=e.scrollProgress(),s=e.scrollSnapList();return s.reduce(((e,i,l)=>Math.abs(i-t)<Math.abs(s[e]-t)?l:e),0)}sliderCanLoop(){return this.emblaApi.internalEngine().slideLooper.canLoop()}updateSlides(e=null){const t=this.querySelectorAll(".gss__slide"),s=t.length,i=e||this.emblaApi.selectedScrollSnap(),l=[];for(let e=0;e<s;e++){let t=Math.abs(e-i);t>s/2&&(t=s-t),l.push(t)}t.forEach(((e,t)=>{const s=l[t];e.dataset.distance=s})),this.buildCtaBlock(i,this.ctaBlock)}buildCtaBlock(e,t){t.innerHTML=`\n      <div class="gss-cta-block__heading row--d2 ">${this.slidesCtaBlockContent[e].heading}</div>\n      <div class="gss-cta-block__subheading row--d2 t-s">${this.slidesCtaBlockContent[e].subheading}</div>\n      <div class="flex justify-center">\n        <a href="${this.slidesCtaBlockContent[e].buttonUrl}" class="v2-btn v2-btn--white f-w500 t-ucase t-xxs">\n          ${this.slidesCtaBlockContent[e].buttonText}\n        </a>\n      </div>\n    `}setCarouselContainerHeight(){const e=Number(this.querySelector(".global-carousel__container .gss__slide img").offsetHeight)*this.maxScaleFactor;this.sliderContainer.style.height=`${e}px`}duplicateSlides(){const e=this.querySelector(".gss__carousel"),t=e.cloneNode(!0).innerHTML;e.insertAdjacentHTML("beforeend",t),this.slidesCtaBlockContent=[...this.slidesCtaBlockContent,...this.slidesCtaBlockContent],this.emblaApi.reInit(),this.sliderCanLoop()||this.duplicateSlides(),this.updateSlides()}}customElements.get("global-showcase-slider")||customElements.define("global-showcase-slider",GlobalShowcaseSlider);var s=self;for(var i in t)s[i]=t[i];t.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();