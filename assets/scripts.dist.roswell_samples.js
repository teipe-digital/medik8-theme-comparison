(()=>{"use strict";var e={d:(t,n)=>{for(var l in n)e.o(n,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:n[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{RoswellSampler:()=>RoswellSampler});class RoswellSampler extends HTMLElement{constructor(){super()}connectedCallback(){DomReadyPromise().then((async()=>{const e=this.querySelector(":scope > template");if(e)try{this.settings=JSON.parse(e.innerHTML),e.remove()}catch(e){console.log(e)}this.settings||this.remove(),this.GlobalCart=await new GlobalCart,this.bind(),this.mount(),this.onCartUpdate()})).catch((e=>{console.log(e)}))}bind(){this.querySelector(".sample-selector-title").addEventListener("click",(e=>{e.target.nextElementSibling.classList.toggle("hidden"),e.target.parentElement.classList.toggle("accordion-item--open")})),this.querySelectorAll(".js-roswell__removeFromCart").forEach((e=>e.addEventListener("click",(t=>{t.preventDefault;const{id:n}=e.dataset;this.GlobalCart.updateQty(!1,!1,[{key:n,qty:0}])})))),this.GlobalCart.subscribe((({eventType:e})=>{"update"!=!e&&this.onCartUpdate()}))}onCartUpdate(){const{cart:e}=this.GlobalCart,t=this.settings.threshold,n=e.items.reduce(((e,{properties:t})=>t._RoswellSample?++e:e),0),l=this.querySelectorAll(".sample-product"),a=this.settings.max_sample;e.total_price>=t?this.style.display="block":(this.style.display="none",this.removeAllSample()),this.toggleSample(l,n,a),this.updateSampleQuantity(n,a),this.updateSampleButton(l,e.items)}toggleSample(e,t,n){t>=n?e.forEach((e=>{e.querySelector(".btn--full").classList.add("disabled")})):e.forEach((e=>{e.querySelector(".btn--full").classList.remove("disabled")}))}updateSampleQuantity(e,t){let n=this.querySelectorAll(".sample-remain");if(n.length>0){let l="Select ",a=t-e;l+=a,l+=" more Free Sample",a>1&&(l+="s"),a>0?n.forEach((e=>e.innerHTML=l)):n.forEach((e=>e.innerHTML=""))}}updateSampleButton(e){const t=this.GlobalCart.cart.items;e.forEach((e=>{e.querySelector(".btn--full")?.classList.remove("hide")})),e.forEach((e=>{e.querySelector(".ajaxcart__qty--remove")?.classList.add("hide")})),e=Array.from(e);t.filter((({properties:e})=>e._RoswellSample)).forEach((t=>{let n=e.filter((e=>e.dataset.id==t.key.split(":")[0]));n.length&&n.forEach((function(e,n){e.querySelector(".btn--full").classList.add("hide");let l=e.querySelector(".ajaxcart__qty--remove");l.classList.remove("hide"),l.dataset.line=n+1,l.dataset.id=t.key}))}))}removeAllSample(){const e=this.GlobalCart.cart.items.filter((({properties:e})=>e._RoswellSample));if(e.length){const t=e.map((({key:e})=>({key:e,qty:0})));this.GlobalCart.updateQty(!1,!1,t)}}mount(){if(!window.RoswellSamplerMounted){const e="\n        <style type=\"text/css\">\n\n          .cart .sample-selector {\n            max-width: 674px; \n          }\n\n          @media all and (max-width: 1024px) {\n            .cart .sample-selector {\n              max-width: 100%; \n            } \n          }\n\n          .sample-selector {\n            padding: 0 20px;\n            background: linear-gradient(180deg, rgba(0, 0, 0, 0.05) 0%, rgba(0, 0, 0, 0) 100%), #FFF; \n          }\n\n          .sample-selector .sample-selector-title {\n            font-family: \"acta_displaymedium\", sans-serif;\n            font-size: 16px;\n            font-weight: 500;\n            line-height: 120%;\n            letter-spacing: 0.8px;\n            padding-top: 20px;\n            padding-bottom: 20px;\n            justify-content: space-between;\n            display: flex;\n            cursor: pointer; \n          }\n\n          .sample-selector .sample-selector-title::after {\n            content: url(\"data:image/svg+xml, %3Csvg xmlns='http://www.w3.org/2000/svg' width='13' height='8' viewBox='0 0 13 8' fill='none'%3E%3Cpath d='M12.0214 7.0179L12.0277 7.01162L12.033 7.00452C12.0841 6.93637 12.125 6.84797 12.125 6.75048C12.125 6.66544 12.0935 6.5631 12.0149 6.4902L6.43632 0.911612L6.34794 0.823223L6.25955 0.911612L0.679117 6.49204C0.536323 6.63484 0.536323 6.87061 0.679117 7.0134C0.821911 7.1562 1.05768 7.1562 1.20048 7.0134L6.34802 1.86587L11.5001 7.0179C11.6428 7.1607 11.8786 7.1607 12.0214 7.0179Z' fill='black' stroke='black' stroke-width='0.25'/%3E%3C/svg%3E\");\n            transform: rotateX(180deg); \n          }\n\n          .sample-selector.accordion-item--open .sample-selector-title {\n            padding-bottom: 0px; \n          }\n\n          .sample-selector.accordion-item--open .sample-selector-title::after {\n            transform: none; \n          }\n\n          .sample-selector .sample-remain {\n            color: #C79A94;\n            font-size: 14px;\n            font-weight: 390;\n            line-height: 150%;\n            flex: 0 0 100%;\n            padding-bottom: 20px; \n          }\n\n          .sample-selector .sample-selector-container {\n            flex: 1;\n            display: flex;\n            overflow-x: auto;\n            overflow-y: hidden;\n            transition: max-height 0.3s ease-out;\n            flex-wrap: wrap;\n            max-height: 1000px; \n          }\n          .sample-selector .sample-selector-container.hidden {\n            max-height: 0; \n          }\n          .sample-selector .sample-selector-container .sample-selector-inner-container {\n            display: flex;\n            justify-content: space-between; \n          }\n          \n          .sample-selector .sample-selector-container .sample-selector-inner-container .sample-product {\n            width: 160px;\n            margin-right: 20px;\n            display: flex;\n            flex-direction: column;\n            justify-content: space-between; \n          }\n          \n          @media all and (max-width: 767px) {\n            .sample-selector .sample-selector-container .sample-selector-inner-container .sample-product {\n              width: 140px; \n            } \n          }\n          \n          .sample-selector .sample-selector-container .sample-selector-inner-container .sample-product:last-child {\n            margin-right: 0; \n          }\n          \n          .sample-selector .sample-selector-container .sample-selector-inner-container .sample-product .sample-title {\n            font-size: 14px;\n            font-weight: 420;\n            line-height: 150%; \n          }\n                \n          .sample-selector .sample-selector-container .sample-selector-inner-container .sample-product .sample-size {\n            color: #666;\n            font-size: 10px;\n            font-weight: 390;\n            line-height: 150%; \n          }\n            \n          .sample-selector .sample-selector-container .sample-selector-inner-container .sample-product .btn--full, .sample-selector .sample-selector-container .sample-selector-inner-container .sample-product .ajaxcart__qty--remove {\n            background: #000;\n            color: #fff;\n            width: 100%;\n            border-radius: 0.25rem;\n            min-height: 3em;\n            line-height: 1.42;\n            font-size: 14px; \n          }\n          \n          .sample-selector .sample-selector-container .sample-selector-inner-container .sample-product .btn--full:hover, .sample-selector .sample-selector-container .sample-selector-inner-container .sample-product .ajaxcart__qty--remove:hover {\n            background: transparent;\n            color: #000 !important; \n          }\n          \n          .sample-selector .sample-selector-container .sample-selector-inner-container .sample-product .btn--full.disabled, .sample-selector .sample-selector-container .sample-selector-inner-container .sample-product .ajaxcart__qty--remove.disabled {\n            color: #666666;\n            background: #A4ACB1;\n            pointer-events: none;\n            border-color: #A4ACB1; \n          }\n          \n          .sample-selector .sample-selector-container .sample-selector-inner-container .sample-product a.btn--full {\n            display: flex;\n            justify-content: center;\n            align-items: center; \n          }\n        \n        </style>\n      ";window.RoswellSamplerMounted=!0,document.body.append(parseHTML(e))}}}customElements.define("roswell-sampler",RoswellSampler);var n=self;for(var l in t)n[l]=t[l];t.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();